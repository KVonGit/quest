@page "/textadventures/{Id}"
@attribute [RequiresConfig("textadventures:Enabled")]
@using QuestViva.Common
@using QuestViva.PlayerCore
@rendermode InteractiveServer
@inject HttpClient HttpClient
@inject Config Config

@if (Config.TextAdventuresRemoteResources)
{
    <p>To do...</p>
}
else
{
    <Game GameDataProvider="@GetGameDataProvider()" ResourceUrlProvider="@GetResourceUrlProvider()"></Game>
}

@code {
    [Parameter] public required string Id { get; set; }
    
    private IGameDataProvider GetGameDataProvider()
    {
        return new UrlGameDataProvider(HttpClient, "http://textadventures.co.uk/games/download/" + Id);
    }

    private IResourceUrlProvider GetResourceUrlProvider()
    {
        return new LocalResourceUrlProvider($"textadventures.{Id}");
    }
}