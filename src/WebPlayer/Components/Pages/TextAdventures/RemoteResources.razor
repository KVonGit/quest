@using QuestViva.Common
@using QuestViva.PlayerCore
@rendermode InteractiveServer
@inject HttpClient HttpClient
@inject Config Config

<Game GameDataProvider="@GetGameDataProvider()" ResourceUrlProvider="GetResourceUrlProvider"></Game>

@code {
    [Parameter] public required string Id { get; set; }

    private IGameDataProvider GetGameDataProvider()
    {
        return new TextAdventuresGameDataProvider(HttpClient, Id);
    }
    
    private IResourceUrlProvider GetResourceUrlProvider(GameData gameData)
    {
        if (gameData.ResourceRoot == null)
        {
            throw new InvalidOperationException("Resource root is not set.");
        }
        return new RemoteResourceUrlProvider(gameData.ResourceRoot);
    }
}